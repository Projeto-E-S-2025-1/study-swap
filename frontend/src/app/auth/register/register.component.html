<!-- src/app/auth/register/register.component.html -->
<div class="register-container">
    <h2>Cadastrar-se</h2>
    <form *ngIf="isBrowser" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label for="name">Nome:</label>
            <input class="form-control" type="text" id="name" formControlName="name" />
            <div *ngIf="registerForm.get('name')?.invalid && registerForm.get('name')?.touched" class="error-message">
                <span *ngIf="registerForm.get('name')?.errors?.['required']">O nome é obrigatório.</span>
                <span *ngIf="registerForm.get('name')?.errors?.['minlength']">O nome deve ter pelo menos 3
                    caracteres.</span>
            </div>
        </div>

        <div class="form-group">
            <label for="email">Email:</label>
            <input class="form-control" type="email" id="email" formControlName="email" />
            <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" class="error-message">
                <span *ngIf="registerForm.get('email')?.errors?.['required']">O email é obrigatório.</span>
                <span *ngIf="registerForm.get('email')?.errors?.['email']">O email deve ser válido.</span>
            </div>
        </div>

        <div class="form-group">
            <label for="password">Senha:</label>
            <input class="form-control" type="password" id="password" formControlName="password" />
            <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
                class="error-message">
                <span *ngIf="registerForm.get('password')?.errors?.['required']">A senha é obrigatória.</span>
                <span *ngIf="registerForm.get('password')?.errors?.['minlength']">A senha deve ter pelo menos 6
                    caracteres.</span>
            </div>
        </div>       

        <div class="form-group">
            <label for="role">Tipo de Usuário:</label>
            <select id="role" formControlName="role">
                <option *ngFor="let role of roles" [value]="role">
                {{ role === 'STUDENT' ? 'Estudante' : role === 'PROFESSOR' ? 'Professor' : role }}
                </option>
            </select>
            <div *ngIf="registerForm.get('role')?.invalid && registerForm.get('role')?.touched" class="error-message">
                <span *ngIf="registerForm.get('role')?.errors?.['required']">O tipo de usuário é obrigatório.</span>
            </div>
        </div>

        <button class="register-btn" type="submit" [disabled]="registerForm.invalid">Cadastrar</button>

        <div *ngIf="errorMessage" class="alert error">{{ errorMessage }}</div>
    </form>
    <div *ngIf="!isBrowser">
        <p>Carregando formulário...</p>
    </div>
    <p class="login-link">Já tem uma conta? <a [routerLink]="['/login']">Faça login aqui</a></p>
</div>
