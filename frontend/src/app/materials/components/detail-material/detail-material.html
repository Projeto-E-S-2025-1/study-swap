<div class="detalhe-material-container">
  <div class="detalhe-material-card">
    <img
      class="detalhe-material-imagem"
      [src]="material?.photo ? apiUrl + material?.photo : apiUrl + '/images/default-photo.png'"
      [alt]="material?.title"
    />

    <div class="detalhe-material-info">
      <h2 class="detalhe-material-titulo">{{ material?.title }}</h2>
      <p class="detalhe-material-descricao">{{ material?.description }}</p>
      <div class="detalhe-material-atributos">
        <span><strong>Tipo:</strong> {{ material?.materialType }}</span>
        <span><strong>Estado de conservação:</strong> {{ material?.conservationStatus }}</span>
        <span><strong>Transação:</strong> {{ material?.transactionType }}</span>
        <span *ngIf="material?.transactionType === 'VENDA'">
          <strong>Preço:</strong> R$ {{ material?.price }}
        </span>
      </div>
      <div class="detalhe-material-acoes" *ngIf="isOwner == true">
        <button class="botao-editar" (click) = "showModal = true">Editar material</button>
        <button class="botao-excluir" (click) = "apagarMaterial()">Excluir material</button>
      </div>
      <div class="denuncia-menu-wrapper" (clickOutside)="showMenu = false">
        <button class="denunciar-btn" (click)="toggleMenu()">
          Denunciar
        </button>

        <div class="denuncia-opcoes" *ngIf="showMenu">
          <a
            *ngIf="materialId !== null"
            [routerLink]="['/report']"
            [queryParams]="{ materialId: materialId }"
          >
            Denunciar Material
          </a>
          <a
            *ngIf="material?.userId"
            [routerLink]="['/report']"
            [queryParams]="{ userId: material?.userId }"
          >
            Denunciar Usuário
          </a>
        </div>
      </div>
    </div>
  </div>

  <div class="question-list-wrapper">
    <app-question-list *ngIf="materialId !== null" [materialId]="materialId"></app-question-list>
  </div>

  <div class="modal-overlay" *ngIf="showModal">
    <div class="modal-content">
      <button class="close-btn" (click)="closeModal()">×</button>
      <app-update-materials (materialAtualizado)="onMaterialAtualizado($event)"></app-update-materials>
    </div>
  </div>
</div>
